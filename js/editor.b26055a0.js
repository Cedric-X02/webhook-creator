(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{2258:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("editor",{attrs:{initData:t.initData},on:{save:t.onSave,dataUpdate:t.onDataUpdate},scopedSlots:t._u([{key:"top-left",fn:function(){return[e("h4",{staticClass:"ml-2 mb-3"},[t._v("Webhook")]),e("div",{staticClass:"card border-0 tex-light mb-4 bg-darker"},[e("div",{staticClass:"card-body mb-0"},[e("webhook-executor",{attrs:{data:t.lastData},on:{messageRetrieved:t.onMessageRetrieved}})],1)])]},proxy:!0},{key:"save",fn:function(){return[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.onSave}},[t._v(" Save Message ")])]},proxy:!0}])}),e("div",{staticClass:"modal fade",attrs:{id:"saveModal",tabindex:"-1",role:"dialog"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t.api.isAuthenticated()?e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("label",[t._v("Message Name")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.saveName,expression:"saveName",modifiers:{trim:!0}}],staticClass:"form-control mb-3",attrs:{type:"text",placeholder:"Cool Message"},domProps:{value:t.saveName},on:{input:function(a){a.target.composing||(t.saveName=a.target.value.trim())},blur:function(a){return t.$forceUpdate()}}}),e("span",{staticClass:"text-muted"},[t._v("Saved messages don't include the webhook or message URL.")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),e("button",{staticClass:"btn btn-primary",class:{disabled:!t.saveName},attrs:{type:"button","data-dismiss":"modal",disabled:!t.saveName},on:{click:t.saveMessage}},[t._v("Save ")])])]):e("div",{staticClass:"modal-content"},[e("login-prompt")],1)])])],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("Save Message")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])])}],n=e("ceb0"),i=e("1157"),l=e.n(i),r=e("4a2a"),d={name:"QuickMessage",components:{Editor:n["a"],WebhookExecutor:r["a"]},created:function(){var t=localStorage.getItem("lastJson");t&&(this.initData={json:JSON.parse(t)})},data:function(){return{saveName:"",initData:null,lastData:{}}},methods:{onDataUpdate:function(t){this.lastData=t,localStorage.setItem("lastJson",JSON.stringify(this.lastData.json))},onSave:function(){l()("#saveModal").modal()},onMessageRetrieved:function(t){this.initData={files:[],json:t}},saveMessage:function(){var t=this;this.saveName&&this.api.saveMessage(this.saveName,this.lastData).then((function(a){a.ok?(t.$notify({group:"main",title:"Messages Saved",text:"You can continue editing your message now",type:"success"}),a.json().then((function(a){return t.$router.push("/dashboard/messages/".concat(a.id))}))):console.log(a)}))}},computed:{api:function(){return this.$store.state.api}}},c=d,u=e("2877"),m=Object(u["a"])(c,s,o,!1,null,null,null);a["default"]=m.exports}}]);